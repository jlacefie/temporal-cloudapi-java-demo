/*
 * This source file was generated by the Gradle 'init' task
 */
package org.example;

import io.temporal.client.CloudOperationsClient;
import io.temporal.serviceclient.CloudServiceStubs;
import io.temporal.serviceclient.CloudServiceStubsOptions;

public class SimpleCloudApiDemo {
    
    private static String apiKey = System.getenv("TEMPORAL_CLIENT_CLOUD_API_KEY");
    private static String apiVersion = System.getenv("TEMPORAL_CLIENT_CLOUD_API_VERSION");
    private static String nsName = "testns";
    private static String namespace = "testns.ksfop";

    public static void main(String[] args) {

        // create a client connection using the experimental CloudOpsClient in the Java SDK
        CloudOperationsClient client = CloudOperationsClient.newInstance(
            CloudServiceStubs.newServiceStubs(
                CloudServiceStubsOptions.newBuilder()
                    .addApiKey(() -> apiKey)
                    .setVersion(apiVersion)
                    .build()));

        // Create a Namespace Client using the CloudOpsClient and Namespace information specified above
        SimpleCloudApiNamespaceClient nsClient = new SimpleCloudApiNamespaceClient(client);
        nsClient.listNamespaces();
        nsClient.createAPIKeyNamespace(nsName, namespace);
        //TODO 
        // createmTLSNamespace
        // Namespace Cert Rotation
        // List Users
    }
}
